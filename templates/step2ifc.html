{% extends "base.html" %}

{% block content %}
<div class="card">
  <div class="section-title">
    <h2>STEP â†’ IFC Converter</h2>
    <span class="badge">Headless CLI workflow</span>
  </div>
  <p>
    Convert fabrication-grade STEP files into coordination-ready IFC with deterministic GUIDs, mapped IFC types,
    classification hooks, and QA/QC reporting. This tool runs as a CLI alongside the server for reproducible exports.
  </p>
  <div class="two-col" style="margin-bottom: 16px">
    <div>
      <h3>Session Files</h3>
      <label for="step2ifcFiles">Available session files</label>
      <select id="step2ifcFiles" multiple data-files-select></select>
      <p class="small">Use the Session Files page to upload STEP files into this session.</p>
    </div>
    <div>
      <h3>Outputs</h3>
      <p class="small">
        Generated outputs will appear in your session directory (IFC + QC reports + JSONL audit logs).
      </p>
    </div>
  </div>
  <div class="two-col">
    <div>
      <h3>Recommended Workflow</h3>
      <ol>
        <li>Place the input <code>.step</code> file in your session folder.</li>
        <li>Prepare a mapping file (see <code>classmap.yaml</code> in the repo).</li>
        <li>Run the conversion command from the CLI.</li>
        <li>Review the generated IFC + QC report outputs.</li>
      </ol>
    </div>
    <div>
      <h3>CLI Example</h3>
      <pre><code>step2ifc convert \
  --in "input.step" \
  --out "output.ifc" \
  --schema IFC4 \
  --units mm \
  --project "MyProject" \
  --site "Site" \
  --building "Building A" \
  --storey "Level 00" \
  --geom brep \
  --class-map classmap.yaml</code></pre>
      <p class="small">Outputs: <code>output.ifc</code>, <code>output.qc.json</code>, <code>output.qc.txt</code>, <code>output.log.jsonl</code></p>
    </div>
  </div>
</div>
{% endblock %}
